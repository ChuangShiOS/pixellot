<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>登录</title>

<link href="./assets/css/style.css" rel="stylesheet" type="text/css">

<script src="./assets/js/axios.min.js"></script>
<script src="./assets/js/config.js" type="text/javascript" charset="utf-8"></script>
<script src="./assets/js/vue.js" type="text/javascript" charset="utf-8"></script>
</head>

<body class="login">

<div class="login_m" id="myModal">
	<div class="login_logo"><img src="./assets/images/logo_login.png" width="196" height="46"></div>
	<div class="login_boder">
		<div class="login_padding">
			<h2>用户名</h2>
			<label>
				<input type="text" class="txt_input txt_input2" v-model="username" />
			</label>
			<h2>密码</h2>
			<label>
				<input type="password" name="textfield2" class="txt_input" v-model="password" />
			</label>
			<div class="rem_sub">
				<label>
					<input type="button" class="sub_button" value="登录" style="opacity: 0.7;" @click="login" />
				</label>
			</div>
		</div>
	</div><!--login_boder end-->
</div><!--login_m end-->

<script type="text/javascript">
var app = new Vue({
	el: "#myModal",
	data: {
		username: '',
		password: '',
		log_in: false,
	},
	methods: {
		login: function(event) {
			pixellot_login
				.post('/login',{
					username : this.username,
					password :this.password 
				})
				.then(
				function (response) {
				    if (response.data.username){
						localStorage.setItem('username', response.data.username);
						localStorage.setItem('token', response.data.token);
				    	location.href='index.html'
				    }else{
				    	location.href='login.html'
				    }
				  }
				)
				.catch()
		}
	}
})
</script>
<br />
<br />

<p align="center"> © 2020 Earthmountain by yu </a></p>

</body>
</html>